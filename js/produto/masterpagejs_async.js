var CookieManager=function(){function t(){var r=Utils.CookieManager.ReadCookie("Segmentation"),i,n,t,u;if(r==null)return!1;for(i=r.split("&"),n=0;n<i.length;n++)if(t=i[n].split("="),t.length==2&&t[0]=="dt"&&(u=new Date(t[1]),u>new Date))return!0;return!1}function i(){var i,r,u;n.EnableSegmentationCookie&&(i=Utils.CookieManager.ReadCookie("TheseusCustomerNumber"),r=Utils.CookieManager.ReadCookie("Segmentation"),i!=null&&(r==null||n.InitSegmentationCookie&&!t())&&(u=JSON.stringify({request:{CustomerNumber:i}}),$.ajax({url:"/servicemyaccountnosession/getmarketingprofile",async:!0,cache:!1,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:u,success:function(n){var f="",e,u,o;if(n.d&&(n=n.d),n.Classifications!=null&&n.Classifications&&n.Classifications.length>0){for(tc_vars.user_classification=n.Classifications,f="CI="+i,e=0;e<n.Classifications.length;e++)u=n.Classifications[e],f+="&"+u.Key+"="+u.Value,u.Key=="clusterNum"&&(tc_vars.user_clusterNum=u.Value);o=new Date((new Date).setHours((new Date).getHours()+1)),f+="&dt="+o.toUTCString(),Utils.CookieManager.CreateCookie("Segmentation",f,365,!0)}}})))}function r(){var n=new Date,t=n.getTimezoneOffset();Utils.CookieManager.CreateCookie("BROWSERCOLORDEPTH",screen.colorDepth,1,!0,!0),Utils.CookieManager.CreateCookie("BROWSERJAVAENABLED",navigator.javaEnabled(),1,!0,!0),Utils.CookieManager.CreateCookie("BROWSERLANGUAGE",navigator.language,1,!0,!0),Utils.CookieManager.CreateCookie("BROWSERSCREENHEIGHT",screen.height,1,!0,!0),Utils.CookieManager.CreateCookie("BROWSERSCREENWIDTH",screen.width,1,!0,!0),Utils.CookieManager.CreateCookie("BROWSERTIMEZONE",t,1,!0,!0),Utils.CookieManager.CreateCookie("BROWSERJAVASCRIPTENABLED","true",1,!0,!0)}var n={InitSegmentationCookie:contextInfo!=null&&contextInfo.Configuration!=null&&contextInfo.Configuration.ConfigCookieManager!=null?contextInfo.Configuration.ConfigCookieManager.InitSegmentationCookie:!0,EnableSegmentationCookie:contextInfo!=null&&contextInfo.Configuration!=null&&contextInfo.Configuration.ConfigCookieManager!=null?contextInfo.Configuration.ConfigCookieManager.EnableSegmentationCookie:!1};return{Initialise:function(){contextInfo.Configuration.ConfigFlags.CreateBrowserCookiesOnPayment==!1&&r(),i()}}}(),siteSelector;$(window).on("load",function(){CookieManager.Initialise()});(function(n,t){"use strict";var i=n.LR_App,r="HandlerMaster";i.events.page={closedFromBottom:"pageScroll.closedFromBottom",resized:"page.size.change"},i.addComponent(r,function(r){this._super(r);var s=r.Model,u=i.utils,f,e,h=u.getScreenSize(),o=i.events.page;t(n).on("scroll",function(){f&&n.clearTimeout(f),f=n.setTimeout(function(){var i=t("body").height(),r=t(n).height(),u=t(this).scrollTop(),f=i-(u+r);f<1200&&s.$eventContainer.trigger(o.closedFromBottom)},100)});t(n).on("resize",function(){e&&n.clearTimeout(e),e=n.setTimeout(function(){var n=u.getScreenSize();h!==n&&(u.triggerCustomEvent(o.resized,{size:n}),h=n)},200)});s.$eventContainer.one(o.closedFromBottom,function(){r.initiateUiComponent("footer","UiFooter")})}),i.utils.isAvailable(r)})(window,window.jQuery),siteSelector=function(){function n(n){return"siteSelector-"+n}function i(){return document.referrer===""||document.referrer.indexOf("google")>=0?!1:typeof siteSelectorConfig!="undefined"}function r(){return Utils.CookieManager.ReadCookie(n("layerShown"))==null?!1:!0}function u(){Utils.CookieManager.CreateCookie(n("layerShown"),1,0)}function f(){return siteSelectorConfig.VisitorCountryCode}function t(){var t=f(),n;for(n in siteSelectorConfig.Countries)if(siteSelectorConfig.Countries[n].CountryCode==t)return siteSelectorConfig.Countries[n];return null}function e(){var n=navigator.language||navigator.userLanguage,t,i;n=n.split("-")[0],t="en";for(i in siteSelectorConfig.SupportedLanguages)n.toLowerCase()==siteSelectorConfig.SupportedLanguages[i]&&(t=siteSelectorConfig.SupportedLanguages[i]);return t}function o(){var i=t(),n;return i==null?null:(n="nodelivery",i==null&&(n="nodelivery"),n=window.location.href.indexOf(i.SiteUrl)<=0?i.LayerType:null,n=="nodelivery"&&window.location.href.indexOf("redoute.com")>0&&(n=null),n)}function s(){res="";for(var n=window.location.host.split(".");n.length>2;)res.length>0&&(res="."+res),res=n.pop()+res;return res}function h(n){var f,r,i,u;if(n.d!=null&&(n=n.d),f=t(),f!=null){r=f.SiteUrl,r=r.replace(/http:\/\//g,""),r=r.replace(/https:\/\//g,""),r=r.replace(/-preview\./g,""),r=r.replace(/-preprod\./g,""),r=r.replace(/uat\./g,""),r=r.replace(/localhost\./g,""),n=n.replace(/\[SiteNameExternal\]/g,r),i=window.location.hostname,i=i.replace(/http:\/\//g,""),i=i.replace(/https:\/\//g,""),i=i.replace(/m-preview\./g,""),i=i.replace(/m-preprod\./g,""),i=i.replace(/localhost\./g,""),i=i.replace(/m\./g,""),i=i.replace(/uat\./g,""),n=n.replace(/\[SiteNameCurrent\]/g,i),u=$("<div>",{id:"siteSelectorContainer","class":"popin",html:n}).appendTo("body"),u.popin();u.find("#btn-close").on("click",u.data("popin").close);u.data("popin").open()}}function c(i){var u,r,f,e;i.preventDefault(),i.stopPropagation(),u=t(),r=u.SiteUrl,r.indexOf("https://")!=0&&(r="https://"+r),f=siteSelectorConfig.RedirectPreferenceDuration,e=s(),r=r+"?omniturecode=COR"+e+"LayerGEO&flag=1",Utils.CookieManager.CreateCookie(n("RedirectPreference"),btoa(r),f),window.location=r}function l(n,t){var i={layerType:n,layerLanguage:t};$.ajax({url:"/servicegeneric/loadsiteselector",type:"GET",contentType:"application/json; charset=utf-8",data:i,success:function(n){h(n)}})}function a(){var i=Utils.CookieManager.ReadCookie(n("RedirectPreference")),t=atob(i);return t!=null&&t.indexOf("http")==0&&t.indexOf("https")==0?(window.location=t,!0):!1}function v(){var i=a(),n,t;if(!i&&!r()&&(n=o(),t=e(),n!=null&&n!="")){u(),Utils.OmnitureManager.addEvents("event101");$(document).on("click","#btn-redirect",c);l(n,t)}}return{Initialise:function(){try{i()&&pageType!=PageTypeEnum.ProductPage&&pageType!=PageTypeEnum.MultiProductPage&&v()}catch(n){console.error(n.message)}}}}(),$(function(){$("body").hasClass("cfao")||siteSelector.Initialise()}),function(n,t){"use strict";var i=n.LR_App,r="UiFooter";i.addComponent(r,function(i,r){var l,a;this._super(i,r);var d=this,g=d.Model,s=!1,f=!1,e=300,u=t("#footerSwitchText");u.length>0&&(u=JSON.parse(u.text()),l=u.toggleBtnShowText,a=u.toggleBtnHideText);var o=t(".footer-services-title"),h=t("#footerServicesToggleBtn"),v=t("#moreCategories1"),y=t("#moreCategories2"),nt=function(){return!f},p=function(i,r){n.Utils.Common.onCustomClick(i.find("a"),function(i){g.$eventContainer.trigger(n.globalTrackingEvent.SHOPPING_TOOL_USED,[{type:"TREE",subType:r,extraData:["null",t(i).text().trim().toLowerCase().replace(/ /g,"-")]}])})},tt=function(n,t,i){return n.text(n.text()==i?t:i)},w=function(){h.toggleClass("footer-services-toggleBtn--isToggled"),tt(h,l,a)},b=function(){var n=t("ul.footer-services-content");f?n.attr("aria-expanded","false").slideUp(e):(s||k(),n.attr("aria-expanded","true").slideDown(e)),f=nt()},it=function(n){var t=document.createElement("ul");return t.classList.add("footer-services-content"),t.setAttribute("aria-expanded","true"),n.Attributes["data-cerberus"]!==undefined&&t.setAttribute("data-cerberus",n.Attributes["data-cerberus"]),t},rt=function(n){var i=document.createElement("li"),t=document.createElement("a");return t.classList.add("footer-services-link"),n.CurrentElement.Url&&(t.href=n.CurrentElement.Url),n.CurrentElement.Attributes.onclick&&t.setAttribute("onclick",n.CurrentElement.Attributes.onclick),t.innerHTML=n.CurrentElement.Text,n.CurrentElement.Attributes["data-cerberus"]!==undefined&&t.setAttribute("data-cerberus",n.CurrentElement.Attributes["data-cerberus"]),i.appendChild(t),i},k=function(n){var r="/servicefooter/loadcolumnsjson.aspx";t.ajax({cache:!1,type:"GET",url:r,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){ut(t),i.isMobile&&c(n)}})},ut=function(n){var r,u=0;n.FooterColumns.forEach(function(n){n.Menus.forEach(function(n){r=it(n),n.IsNewsletterMenu!==!0&&n.ChildElements.forEach(function(n){r.appendChild(rt(n))}),o[u]&&o[u].insertAdjacentElement("afterend",r),i.isMobile&&t("ul.footer-services-content").hide(),u++})}),s=!0},c=function(t){var i=t,r=n.elementStatus.opened,u=i.hasClass(r);u?(i.removeClass(r),i.next("ul.footer-services-content").slideUp(e),u=!1):(i.addClass(r),i.next("ul.footer-services-content").slideDown(e),u=!0)};if([n.pageName.hp,n.pageName.basket].indexOf(i.name)>-1)f=!0,i.isMobile?t("ul.footer-services-content").hide():t("ul.footer-services-content").show();else if(!i.isMobile){h.on("click",function(){b(),w()});if(i.name!=="MobileV3_Home")o.on("click",function(){b(),w()})}if(i.isMobile){o.on("click",function(){[n.pageName.hp,n.pageName.basket].indexOf(i.name)==-1?s?c(t(this)):k(t(this)):c(t(this))});t("ul.footer-services-content").hide()}v.length>0&&p(v,"BottomSEOKeywords"),y.length>0&&p(y,"BottomSEOSeeAlso")}),i.utils.isAvailable(r)}(window,window.jQuery)